var jpath=(function(){function C(E){for(var G=E.slice(0),H=1,F=arguments.length;H<F;H++){G.unshift(arguments[H])}return G}function D(F,E){return F.push.apply(F,E)}function A(I,H,F){if(!H.length){return[I]}var J=H[0];if(J==".."){return A(F.shift(),H.slice(1),F)}if(typeof I!="object"){return H.length==1&&J=="*"?[I]:[]}if(J=="last()"){return I.length?A(I[I.length-1],H.slice(1),C(F,I)):[]}var E=[];if(J!==""){if(I.hasOwnProperty(J)){D(E,A(I[J],H.slice(1),C(F,I)))}else{if(J=="*"){for(var G in I){if(I.hasOwnProperty(G)){D(E,A(I[G],H.slice(1),C(F,I)))}}}}}else{J=H[1];for(var G in I){if(I.hasOwnProperty(G)){if(I[G].hasOwnProperty(J)){D(E,A(I[G][J],H.slice(2),C(F,I,I[G])))}else{if(J=="*"||G===J){D(E,A(I[G],H.slice(2),C(F,I)))}else{D(E,A(I[G],H,C(F,I)))}}}}}return E}function B(G,L){if(L.charAt(0)!="/"){L="/"+L}var J=L.replace(/\/+$/,"").replace(/\/\/+/,"//").replace(/\[(\d+)\]/,"/$1").replace(/\/(\.\/)+/g,"/").replace(/^\.\//,"/").replace(/\/\.$/,"").split("/").slice(1);var K=[];for(var H=0,E=J.length,F=0;H<E;H++){if(F<=0){K.push(J[H])}else{K[K.length-1]+="/"+J[H]}var I=J[H].match(/\[/g);var M=J[H].match(/\]/g);F+=(I?I.length:0)-(M?M.length:0)}return A(G,K,[])}return B})();